[gd_scene load_steps=19 format=3 uid="uid://dtolxxjoqkgo0"]

[ext_resource type="Script" uid="uid://cm0yx5elt23ld" path="res://scripts/lover/lover.gd" id="1_1vqcf"]
[ext_resource type="AudioStream" uid="uid://b2qi2esqtr5vq" path="res://audio/sfx/click.wav" id="2_mn0fs"]
[ext_resource type="PackedScene" uid="uid://cuxjkncqb8mx6" path="res://objects/characters/human_animator.tscn" id="3_c6mad"]
[ext_resource type="Texture2D" uid="uid://dtso1iiu8g2wr" path="res://art/UI/HeartBorder.png" id="4_2h8dg"]
[ext_resource type="Texture2D" uid="uid://d1qvhhs1cputj" path="res://art/UI/HeartFill.png" id="5_bnod0"]
[ext_resource type="Texture2D" uid="uid://dmgurgm2kv8a2" path="res://art/UI/expressions/expression_alerted.png" id="6_52yyk"]
[ext_resource type="Script" uid="uid://bvoyt6bm5coqt" path="res://scripts/lover/lover_follower.gd" id="7_jvvwb"]
[ext_resource type="Script" uid="uid://casnc1jootvaf" path="res://scripts/lover/lover_state_machine.gd" id="8_8nklq"]
[ext_resource type="Script" uid="uid://d0koexjdo2axm" path="res://scripts/lover/lover_patrol.gd" id="9_odvb5"]
[ext_resource type="Script" uid="uid://dvl11tcr2o1df" path="res://scripts/lover/lover_expressions.gd" id="10_qviqk"]
[ext_resource type="Texture2D" uid="uid://cbsrktlop3ijr" path="res://art/UI/expressions/expression_attack.png" id="11_3klch"]
[ext_resource type="Texture2D" uid="uid://jksmeolg7flo" path="res://art/UI/expressions/expression_love.png" id="12_hpu45"]
[ext_resource type="Texture2D" uid="uid://cbirjpvry33od" path="res://art/UI/expressions/expression_sad.png" id="13_xn0uw"]
[ext_resource type="Script" uid="uid://ddocj6ctltjkb" path="res://scripts/lover/lover_partner_manager.gd" id="14_newto"]
[ext_resource type="Script" uid="uid://ugi2b1mwemlf" path="res://scripts/vfx/lightning_beam.gd" id="15_6m3dp"]
[ext_resource type="Script" uid="uid://cr5cvfl2lpwkc" path="res://scripts/vfx/jealous_popup.gd" id="16_kut62"]
[ext_resource type="FontFile" uid="uid://b8i3q121b40nv" path="res://art/fonts/MinimalPixelFont.ttf" id="17_hq2s3"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_acjsf"]
size = Vector2(20, 23)

[node name="Lover" type="CharacterBody2D" groups=["lovers"]]
visibility_layer = 2
collision_layer = 2
collision_mask = 0
script = ExtResource("1_1vqcf")
click_sound = ExtResource("2_mn0fs")

[node name="HumanAnimator" parent="." instance=ExtResource("3_c6mad")]
modulate = Color(2, 2, 2, 1)

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, -1.5)
shape = SubResource("RectangleShape2D_acjsf")

[node name="BeamToNode" type="Node2D" parent="."]
position = Vector2(0, -16)

[node name="HeartBar" type="TextureProgressBar" parent="."]
z_index = 5
clip_contents = true
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -10.0
offset_top = -31.0
offset_right = 10.0
offset_bottom = -11.0
grow_horizontal = 2
grow_vertical = 2
step = 0.3
fill_mode = 3
nine_patch_stretch = true
texture_under = ExtResource("4_2h8dg")
texture_progress = ExtResource("5_bnod0")

[node name="Expression" type="TextureRect" parent="."]
z_index = 4
offset_left = -4.0
offset_top = -21.0
offset_right = 4.0
offset_bottom = -12.0
texture = ExtResource("6_52yyk")
expand_mode = 1
stretch_mode = 3

[node name="Lover" type="Node" parent="."]

[node name="LoverFollower" type="Node" parent="Lover"]
script = ExtResource("7_jvvwb")
follow_offset = Vector2(10, 0)
metadata/_custom_type_script = "uid://bvoyt6bm5coqt"

[node name="LoverStateMachine" type="Node" parent="Lover"]
script = ExtResource("8_8nklq")
metadata/_custom_type_script = "uid://casnc1jootvaf"

[node name="LoverPatrol" type="Node" parent="Lover"]
script = ExtResource("9_odvb5")
metadata/_custom_type_script = "uid://d0koexjdo2axm"

[node name="LoverExpressions" type="Node" parent="Lover" node_paths=PackedStringArray("expression_node")]
script = ExtResource("10_qviqk")
expression_node = NodePath("../../Expression")
alerted_sprite = ExtResource("11_3klch")
love_sprite = ExtResource("12_hpu45")
sad_sprite = ExtResource("13_xn0uw")
metadata/_custom_type_script = "uid://dvl11tcr2o1df"

[node name="LoverPartnerManager" type="Node" parent="Lover"]
script = ExtResource("14_newto")
metadata/_custom_type_script = "uid://ddocj6ctltjkb"

[node name="LightningBeam" type="Node2D" parent="."]
position = Vector2(0, -17)
script = ExtResource("15_6m3dp")
segments = 5
jaggedness = 5.0

[node name="Line2D" type="Line2D" parent="LightningBeam"]
self_modulate = Color(3, 3, 3, 1)
points = PackedVector2Array(0, 0, 15, 0)
width = 1.0
default_color = Color(0.669804, 0.0159284, 5.29438e-07, 1)

[node name="JealousPopup" type="Node2D" parent="."]
script = ExtResource("16_kut62")
lifetime = 3.0
rise_distance = 5.0
ease_curve = 1.0

[node name="Label" type="Label" parent="JealousPopup"]
offset_left = -19.0
offset_top = -19.0
offset_right = 21.0
offset_bottom = 4.0
theme_override_fonts/font = ExtResource("17_hq2s3")
theme_override_font_sizes/font_size = 9
text = "jealous!"
horizontal_alignment = 1
vertical_alignment = 1
autowrap_mode = 2
